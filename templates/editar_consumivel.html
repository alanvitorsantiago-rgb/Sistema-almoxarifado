<!-- /templates/editar_consumivel.html -->
{% extends 'base.html' %}

{% block title %}Editar Consumível - Almoxarifado{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Editar Consumível</h3>
    <a href="{{ url_for('consumivel') }}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Voltar</a>
</div>

<div class="card">
    <div class="card-body">
        <form method="post">
            <div class="row g-3">
                <!-- Linha 1 -->
                <div class="col-md-3">
                    <label for="n_produto" class="form-label">Nº Produto*</label>
                    <input type="text" class="form-control" id="n_produto" name="n_produto" value="{{ consumivel.n_produto }}" readonly>
                </div>
                <div class="col-md-3">
                    <label for="codigo_produto" class="form-label">Código Produto*</label>
                    <input type="text" class="form-control" id="codigo_produto" name="codigo_produto" value="{{ consumivel.codigo_produto }}" readonly>
                </div>
                <div class="col-md-3">
                    <label for="status_estoque" class="form-label">Status Estoque</label>
                    <select class="form-select" id="status_estoque" name="status_estoque">
                        <option value="Ativo" {% if consumivel.status_estoque == 'Ativo' %}selected{% endif %}>Ativo</option>
                        <option value="Inativo" {% if consumivel.status_estoque == 'Inativo' %}selected{% endif %}>Inativo</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="status_consumo" class="form-label">Status Consumo</label>
                    <input type="text" class="form-control" id="status_consumo" name="status_consumo" value="{{ consumivel.status_consumo or '' }}">
                </div>

                <!-- Linha 2 -->
                <div class="col-md-8">
                    <label for="descricao" class="form-label">Descrição*</label>
                    <input type="text" class="form-control" id="descricao" name="descricao" value="{{ consumivel.descricao }}" required>
                </div>
                <div class="col-md-2">
                    <label for="unidade_medida" class="form-label">Unidade Medida</label>
                    <input type="text" class="form-control" id="unidade_medida" name="unidade_medida" value="{{ consumivel.unidade_medida or 'UN' }}">
                </div>
                <div class="col-md-2">
                    <label for="categoria" class="form-label">Categoria</label>
                    <input type="text" class="form-control" id="categoria" name="categoria" value="{{ consumivel.categoria or '' }}">
                </div>

                <!-- Linha 3 -->
                <div class="col-md-6">
                    <label for="fornecedor" class="form-label">Fornecedor Principal</label>
                    <input type="text" class="form-control" id="fornecedor" name="fornecedor" value="{{ consumivel.fornecedor or '' }}">
                </div>
                <div class="col-md-6">
                    <label for="fornecedor2" class="form-label">Fornecedor Alternativo</label>
                    <input type="text" class="form-control" id="fornecedor2" name="fornecedor2" value="{{ consumivel.fornecedor2 or '' }}">
                </div>

                <!-- Linha 4 -->
                <div class="col-md-3">
                    <label for="valor_unitario" class="form-label">Valor Unitário (R$)</label>
                    <input type="number" class="form-control" id="valor_unitario" name="valor_unitario" value="{{ consumivel.valor_unitario or 0 }}" step="0.01">
                </div>
                <div class="col-md-3">
                    <label for="lead_time" class="form-label">Lead Time (dias)</label>
                    <input type="number" class="form-control" id="lead_time" name="lead_time" value="{{ consumivel.lead_time or 7 }}">
                </div>
                <div class="col-md-3">
                    <label for="estoque_seguranca" class="form-label">Estoque Segurança (%)</label>
                    <input type="number" class="form-control" id="estoque_seguranca" name="estoque_seguranca" value="{{ consumivel.estoque_seguranca or 0 }}" step="0.01">
                </div>
                <div class="col-md-3">
                    <label for="estoque_minimo" class="form-label">Estoque Mínimo</label>
                    <input type="number" class="form-control" id="estoque_minimo" name="estoque_minimo" value="{{ consumivel.estoque_minimo or 0 }}" step="0.01">
                </div>

                <!-- Linha 5 -->
                <div class="col-md-6">
                    <label for="quantidade_atual" class="form-label">Quantidade Atual*</label>
                    <input type="number" class="form-control" id="quantidade_atual" name="quantidade_atual" value="{{ consumivel.quantidade_atual }}" required step="0.01">
                </div>
                <div class="col-md-6">
                    <label class="form-label">&nbsp;</label>
                    <div class="alert alert-info mb-0">
                        Última atualização: {{ consumivel.data_atualizacao.strftime('%d/%m/%Y %H:%M') if consumivel.data_atualizacao else 'N/A' }}
                    </div>
                </div>

                <!-- Botões -->
                <div class="col-12 mt-4">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-save"></i> Salvar Alterações
                    </button>
                    <a href="{{ url_for('consumivel') }}" class="btn btn-secondary btn-lg">
                        <i class="fas fa-times"></i> Cancelar
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
